# ============================================================================
# OPTIONS
# ============================================================================

# Terminal and color settings
set -g default-terminal "tmux-256color"
set-option -sa terminal-overrides ",xterm*:Tc"

# Remove delay for escape key
set -sg escape-time 0

# Status bar position
set-option -g status-position top

set -g mouse on
set -g base-index 1

setw -g mode-keys vi


# ============================================================================
# KEYMAPS
# ============================================================================

# Prefix key
set -g prefix C-Space
unbind C-b
bind C-Space send-prefix
bind-key x kill-pane

# Remap window selection to AZERTY number row
bind-key & select-window -t 1
bind-key é select-window -t 2
bind-key '"' select-window -t 3
bind-key "'" select-window -t 4
bind-key '(' select-window -t 5
bind-key '-' select-window -t 6
bind-key è select-window -t 7
bind-key _ select-window -t 8
bind-key ç select-window -t 9
bind-key à select-window -t 0
bind-key ù split-window -h
bind-key % split-window -v

# Navigate splits
bind -r k select-pane -U
bind -r j select-pane -D
bind -r h select-pane -L
bind -r l select-pane -R

# Scroll/copy mode remaps
bind-key -T copy-mode-vi y send-keys -X copy-pipe "wl-copy"
bind-key -T copy-mode-vi v send-keys -X begin-selection

bind e copy-mode

# Reload config
unbind r
bind r source-file ~/.config/tmux/tmux.conf \; display-message "Config reloaded!"

# ============================================================================
# STATUS BAR
# ============================================================================

set -g status-right-length 100
set -g status-left-length 100
set -g status-left " "
set -g status-right "#{E:@catppuccin_status_date_time}"

# ============================================================================
# PLUGINS
# ============================================================================

# Plugin manager
set -g @plugin 'tmux-plugins/tpm'

# Theme
set -g @plugin 'catppuccin/tmux'
set -g @catppuccin_flavor 'mocha'
set -g @catppuccin_window_status_style "basic"
set -g @catppuccin_date_time_text " %H:%M "

# Plugin keybindings:
# prefix + I     : Install new plugins
# prefix + U     : Update plugins
# prefix + alt+u : Remove/uninstall plugins

# Initialize TPM (keep at bottom)
run '~/.tmux/plugins/tpm/tpm'
